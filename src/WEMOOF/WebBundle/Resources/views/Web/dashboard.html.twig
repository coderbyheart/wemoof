{% extends "WEMOOFWebBundle::page.html.twig" %}
{% set meta_title %}Mein Dashboard | WEMO♥F{% endset %}
{% block content %}
    <article class="dashboard">
        <h1>
            <a href="/">
                <img src="{{ asset('bundles/wemoofweb/images/logo-m-wide.png') }}" alt="WEMO♥OF &ndash; Webmontag Offenbach" id="logo"/>
            </a>
        </h1>

        <h2><strong>Hallo {{ user }}</strong>,<br>schön dich zu sehen!</h2>

        <p>Du befindest dich nun in deinem persönlichen Bereich. Hier kannst Du dich zu unseren Veranstaltungen anmelden
            und dein Profil bearbeiten.</p>

        <p>
            <a href="{{ path("wemoof_logout") }}">Logout</a>
        </p>

    </article>
    <article class="dashboard register">
        <h2>Zu einem Webmontag anmelden</h2>
        {% for registerableEvent in registerableEvents %}
            {% if loop.first %}
                <p>Zu diesen Webmontagen kannst Du dich jetzt anmelden.</p>
                <p>Die Teilnahme an der Veranstaltung ist Dank unserer <a href="#sponsoren">Sponsoren</a> kostenfrei
                    möglich.</p>
            {% endif %}
            {% form_theme registerableEvent.form 'WEMOOFWebBundle:Form:fields.html.twig' %}
            <form method="POST" action="{{ path("wemoof_register_event", {"id": registerableEvent.event.id }) }}" class="clearfix">
                <h3>{{ registerableEvent.event.name }}, am {{ registerableEvent.event.start|shortdate }}</h3>

                <p>{{ form_widget(registerableEvent.form) }}</p>
                <button type="submit">Anmelden</button>
            </form>
        {% else %}
            <p>Zur Zeit kannst Du dich nicht für eine Veranstaltung anmelden.</p>
        {% endfor %}
    </article>
    {% for unregisterableEvent in unregisterableEvents %}
        {% if loop.first %}
            <article class="dashboard unregister">
            <h2>Von einem Webmontag abmelden</h2>
            <p>Aktuell bist Du zu diesen kommenden Webmontagen angemeldet. Du kannst dich jederzeit wieder abmelden und
                so deinen Platz für andere zur Verfügung stellen.</p>
        {% endif %}
        {% form_theme unregisterableEvent.form 'WEMOOFWebBundle:Form:fields.html.twig' %}
        <form method="POST" action="{{ path("wemoof_unregister_event", {"id": unregisterableEvent.registration.id }) }}" class="clearfix">
            <h3>{{ unregisterableEvent.event.name }}, am {{ unregisterableEvent.event.start|shortdate }}</h3>
            {{ form_widget(unregisterableEvent.form) }}
            <p>
                <button type="submit" class="danger">Jetzt abmelden</button>
            </p>
        </form>
        {% if loop.last %}
            </article>
        {% endif %}
    {% endfor %}

    <article class="dashboard editprofile" id="editprofile">
        <h2>Dein Profil bearbeiten</h2>

        <p>Die Profilinformationen werden verwendet, um öffentliche Profile der Webmontag-Gäste zu erzeugen. Ein Teil
            der Informationen (Name, Titel, Twitter, Tags) wird auch auf ein Namensschild gedruckt, dass Du am Einlass
            erhältst. So kannst Du leichter mit anderen Gästen ins Gespräch kommen.</p>

        {% form_theme editProfileForm 'WEMOOFWebBundle:Form:fields.html.twig' %}
        <form method="POST" action="{{ path("wemoof_dashboard") }}#editprofile" class="clearfix">
            {{ form_widget(editProfileForm) }}
            <p>
                <button type="submit">Aktualisieren</button>
            </p>
        </form>

        <dl>
            <dt>Öffentliche Profile</dt>
            <dd>… werden als Teilnehmer auf der Veranstaltungsseite angezeigt und können so anderen Nutzern gefunden
                werden.
            </dd>
            <dt>Gravatar verwenden</dt>
            <dd>Wenn Du dich unter <a href="http://gravatar.com/">gravatar.com</a> mit deiner E-Mail-Adresse
                <em>{{ user.email }}</em> registrierst, zeigen wir auch dein Bild an.
            </dd>
        </dl>
    </article>

    <article class="dashboard profile user clearfix">
        {% if user.public %}
            <p>Die URL zu deiner WEMO♥F-Profilseite lautet:<br>
                <a href="{{ path('wemoof_user', {'id': user.id, 'slug': user|slug }) }}">{% if app.request.isSecure() %}https://{% else %}http://{% endif %}{{ app.request.host }}{{ path('wemoof_user', {'id': user.id, 'slug': user|slug }) }}</a>
            </p>
        {% else %}
            <p><em>Nur zur Vorschau, dein Profil ist leider nicht öffentlich.</em></p>
        {% endif %}
        {% include "WEMOOFWebBundle:Web:part/user.html.twig" %}
    </article>

{% endblock %}
